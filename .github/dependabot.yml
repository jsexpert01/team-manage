version: 2
updates:
# Root level package.json (Turborepo)
- package-ecosystem: "npm" # See documentation for possible values
  directory: "/" # Location of package manifests
  schedule:
    interval: "weekly"
  labels:
  - "dependencies"
  - "turbo"
  commit-message:
    prefix: "chore(deps)"
    prefix-development: "chore(deps-dev)"
  groups:
    turborepo-deps:
      patterns:
      - "turbo"
      - "@turbo/*"
  allow:
  - dependency-type: "all"
  security-updates-only: true

# Web App
- package-ecosystem: "npm"
  security-updates-only: true
  directory: "/web"
  schedule:
    interval: "weekly"
  labels:
  - "dependencies"
  - "web"
  groups:
    next-deps:
      patterns:
      - "next"
      - "@next/*"
    react-deps:
      patterns:
      - "react"
      - "react-dom"

# Admin App
- package-ecosystem: "npm"
  security-updates-only: true
  directory: "/admin"
  schedule:
    interval: "weekly"
  labels:
  - "dependencies"
  - "admin"
  groups:
    next-deps:
      patterns:
      - "next"
      - "@next/*"
    react-deps:
      patterns:
      - "react"
      - "react-dom"

# Sites App
- package-ecosystem: "npm"
  security-updates-only: true
  directory: "/space"
  schedule:
    interval: "weekly"
  labels:
  - "dependencies"
  - "sites"
  groups:
    next-deps:
      patterns:
      - "next"
      - "@next/*"
    react-deps:
      patterns:
      - "react"
      - "react-dom"

# Live Server
- package-ecosystem: "npm"
  security-updates-only: true
  directory: "/live"
  schedule:
    interval: "weekly"
  labels:
  - "dependencies"
  - "live"
  - "nodejs"

# Python service
- package-ecosystem: "pip"
  security-updates-only: true
  directory: "/apiserver"
  schedule:
    interval: "weekly"
  labels:
  - "dependencies"
  - "backend"
  - "python"

# GitHub Actions
- package-ecosystem: "github-actions"
  security-updates-only: true
  directory: "/"
  schedule:
    interval: "weekly"
  labels:
  - "ci-cd"
  - "dependencies"

# Docker dependencies
- package-ecosystem: "docker"
  security-updates-only: true
  directory: "/"
  schedule:
    interval: "weekly"
  labels:
  - "dependencies"
  - "docker"
